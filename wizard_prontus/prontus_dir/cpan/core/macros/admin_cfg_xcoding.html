<div class="listado">

    <div style="height:37px;">
        <p style="float: left;"><b>Configuraci√≥n de Transcodificaci&oacute;n</b>: %%_prontus_id%%-xcoding.cfg</p>
        <div class="botones">
            <div class="boton-gris3 aright">
                <a onclick="window.location.reload(); return false;" href="#" class="button" title="Cancelar">
                    <span>Cancelar</span>
                </a>
            </div>
            <div class="boton-gris3 aright">
                <a onclick="Cfgedit.guardaCfg('xcoding'); return false;" href="#" class="button" title="Guardar">
                    <span>Guardar</span>
                </a>
            </div>
        </div>
        <div class="aright" id="ajax-loading" style="margin-right: 55px; display: none;">
            <img src="/%%_prontus_id%%/cpan/core/imag/loading.gif" width="32" height="32" alt="loading" />

        </div>
    </div>

    <form name="frmCFG-XCODING" id="frmCFG-XCODING" method="post">
        <table class="tableform" width="100%">
            <input type="hidden" name="_cfg" value="xcoding" />
            <input type="hidden" name="_path_conf" value="%%_path_conf%%" />
            <input type="hidden" name="_tab" value="cfg-tab14" />
            <input type="hidden" name="N_THREADS" value="%%N_THREADS%%" />
            <input type="hidden" name="XCODING_PPROC" value="%%XCODING_PPROC%%" />
            <tr class="head">
                <td>Variable</td>
                <td>Valor</td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    LIMIT_BITRATE<br>
                    <span class="ayuda">Activa los l&iacute;mites de bitrate para los videos subidos, si estos superan los umbrales definidos abajo, ser&aacute;n transcodificados una vez que se guarde el art&iacute;culo que los contiene.<br/><br/></span>
                </td>
                <td>
                    <input type="radio" name="LIMIT_BITRATE" id="LIMIT_BITRATE_SI" value="SI"%%LIMIT_BITRATE_SI%%/> <label for="LIMIT_BITRATE_SI">SI</label>
                    &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="LIMIT_BITRATE" id="LIMIT_BITRATE_NO" value="NO"%%LIMIT_BITRATE_NO%%/> <label for="LIMIT_BITRATE_NO">NO</label>
                </td>
            </tr>

            <tr>
                <td style="width: 300px;" valign="top">
                    MAX_VIDEO_BITRATE<br>
                    <span class="ayuda">M&aacute;ximo bitrate permitido en el video (en kbps). Si es mayor al ingresado se recodificar&aacute; el video al guardar el art&iacute;culo que lo contiene.</span>
                </td>
                <td>
                    <input type="text" name="MAX_VIDEO_BITRATE" value="%%MAX_VIDEO_BITRATE%%" class="fieldform xcoding_param" />
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    MAX_AUDIO_BITRATE<br>
                    <span class="ayuda">M&aacute;ximo bitrate permitido en el audio (en kbps). Si es mayor al ingresado se recodificar&aacute; el video al guardar el art&iacute;culo que lo contiene.</span>
                </td>
                <td>
                    <input type="text" name="MAX_AUDIO_BITRATE" value="%%MAX_AUDIO_BITRATE%%" class="fieldform xcoding_param" />
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    XCODE_MAX_PIXEL<br>
                    <span class="ayuda">Alto y ancho m&aacute;ximo permitido de la imagen del video (en pixeles), al recodificar se usar&aacute; este tama&ntilde;o como m&aacute;ximo.</span>
                </td>
                <td>
                    <input type="text" name="XCODE_MAX_PIXEL" value="%%XCODE_MAX_PIXEL%%" class="fieldform xcoding_param" />
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    GEN_HLS<br>
                    <span class="ayuda">Activa la generaci&oacute;n de segmentos para la distribuci&oacute;n v&iacute;a HLS de videos.<br/><br/>
                    Al activar esta opci&oacute;n siempre se transcodificar&aacute;n los videos.
                    <br/></span>
                </td>
                <td>
                    <input type="radio" name="GEN_HLS" id="GEN_HLS_SI" onchange="CfgXcoding.showAlert(this);" value="SI"%%GEN_HLS_SI%%/> <label for="GEN_HLS_SI">SI</label>
                    &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="GEN_HLS" id="GEN_HLS_NO" onchange="CfgXcoding.showAlert(this);" value="NO"%%GEN_HLS_NO%%/> <label for="GEN_HLS_NO">NO</label>
                    <div class="msg-global" style="text-align: left;" id="GEN_HLS_alert">
                        <img src="/%%_PRONTUS_ID%%/cpan/core/imag/boto/msg-alert.png" width="24" height="24" alt="Alerta" title="Alerta" />
                        <span>Activar la generaci&oacute;n de HLS duplica el uso de espacio de almacenamiento para los videos.</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    PRECISION_HLS<br>
                    <span class="ayuda">Activa la utilizaci&oacute;n de mayor precisi&oacute;n al generar los segmentos para HLS, para lograr una duraci&oacute;n de 10 segundos.<br/><br/>
                    Requiere FFMPEG versi&oacute;n 1.2.12 o superior.
                    <br/></span>
                </td>
                <td>
                    <input type="radio" name="PRECISION_HLS" id="PRECISION_HLS_SI" value="SI"%%PRECISION_HLS_SI%%/> <label for="PRECISION_HLS_SI">SI</label>
                    &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="PRECISION_HLS" id="PRECISION_HLS_NO" value="NO"%%PRECISION_HLS_NO%%/> <label for="PRECISION_HLS_NO">NO</label>
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    MODO_PARALELO<br>
                    <span class="ayuda">Activa el procesamiento simult&aacute;neo de las m&uacute;ltiples calidades que ser&aacute;n generadas.<br/><br/></span>
                </td>
                <td>
                    <input type="radio" name="MODO_PARALELO" id="MODO_PARALELO_SI" onchange="CfgXcoding.showAlert(this);" value="SI"%%MODO_PARALELO_SI%%/> <label for="MODO_PARALELO_SI">SI</label>
                    &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="MODO_PARALELO" id="MODO_PARALELO_NO" onchange="CfgXcoding.showAlert(this);" value="NO"%%MODO_PARALELO_NO%%/> <label for="MODO_PARALELO_NO">NO</label>
                    <div class="msg-global" style="text-align: left;" id="MODO_PARALELO_alert">
                        <img src="/%%_PRONTUS_ID%%/cpan/core/imag/boto/msg-alert.png" width="24" height="24" alt="Alerta" title="Alerta" />
                        <span>La carga de trabajo del servidor aumentar&aacute; considerablemente, no se recomienda activar en servidores peque&ntilde;os (menor a 1 GB de RAM y menor a 2 cpu)</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    XCODE_MAX_PARALELO<br>
                    <span class="ayuda">Cantidad m&aacute;xima de procesos que se ejecutar&aacute;n al transcodificar un video.<br/>
                    <br/>Nota:<br/>Esta es la cantidad de procesos para cada transcodificaci&oacute;n individual, no es un m&aacute;ximo global.<br/></span>
                </td>
                <td><input type="text" name="XCODE_MAX_PARALELO" class="fieldform" value="%%XCODE_MAX_PARALELO%%" /></td>
            </tr>
            <tr>
                <td style="width: 300px;" valign="top">
                    RUTA_TEMPORAL_XCODING<br>
                    <span class="ayuda">Indica la ruta absoluta a una carpeta donde se realizar&aacute; el trabajo de transcodificaci&oacute;n, por ejemplo puede ser una unidad de memoria ram. Es opcional.<br/>
                    <br/>Ejemplo:<br/>/var/www/misitio.cl/ramdisk/<br/></span>
                </td>
                <td><input type="text" name="RUTA_TEMPORAL_XCODING" class="fieldform" value="%%RUTA_TEMPORAL_XCODING%%" /></td>
            </tr>
        </table>
    </form>
    <div class="botones">
        <div class="boton-gris3 aright">
            <a onclick="window.location.reload(); return false;" href="#" class="button" title="Cancelar">
                <span>Cancelar</span>
            </a>
        </div>
        <div class="boton-gris3 aright">
            <a onclick="Cfgedit.guardaCfg('xcoding'); return false;" href="#" class="button" title="Guardar">
                <span>Guardar</span>
            </a>
        </div>
    </div>
    <div class="aright" id="ajax-loading" style="margin-right: 55px; display: none;">
        <img src="/%%_prontus_id%%/cpan/core/imag/loading.gif" width="32" height="32" alt="loading" />
    </div>

    <br/>
    <br/>
    <div class="botones">
        <div class="boton-gris3 aright">
            <a onclick="CfgXcoding.cargaCfg(); return false;" href="#" class="button" title="Cancelar">
                <span>Cancelar</span>
            </a>
        </div>
        <div class="boton-gris3 aright">
            <a onclick="CfgXcoding.guardar(); return false;" href="#" class="button" title="Guardar">
                <span>Guardar Formatos</span>
            </a>
        </div>
    </div>
    <table class="tableform" width="100%">
        <tr class="head">
            <td colspan="2">Editor de Formatos de Video</td>
        </tr>
        <tr>
            <td style="width: 300px;" valign="top">
            Marca Prontus de Video<br>
            <span class="ayuda">Marca Prontus de un video subido a trav&eacute;s del transcodificador, por ejemplo: MULTIMEDIA_VIDEO2</span>
            <br />
            <br />
                <select style="width: 250px;" id="MARCA_PRONTUS" onclick="CfgXcoding.cargaFormatos(); return false;">
                    <option value="MULTIMEDIA_VIDEO1">MULTIMEDIA_VIDEO1</option>
                </select>
                <div class="boton-gris3 aright">
                    <a onclick="CfgXcoding.borrarMarca(); return false;" href="#" class="button" title="Borrar">
                        <span>Borrar</span>
                    </a>
                </div>
                <span class="ayuda">MULTIMEDIA_VIDEO1 es la marca por defecto y por ello no se puede borrar</span>
            </td>
            <td style="width: 300px;" valign="top">
            Formato de Video<br>
            <span class="ayuda">Formato de video que se generar&aacute; desde el video subido al realizar la transcodificaci&oacute;n.</span>
            <br />
            <br />
                <select style="width: 250px;" id="FORMAT" onclick="CfgXcoding.cargaParametros(); return false;">
                    <option value="">Por defecto</option>
                </select>
                <div class="boton-gris3 aright">
                    <a onclick="CfgXcoding.borrarFormato(); return false;" href="#" class="button" title="Borrar">
                        <span>Borrar</span>
                    </a>
                </div>
            </td>
        </tr>
        <tr>
            <td style="width: 300px;" valign="top">
                Agregar Id de Marca MULTIMEDIA_VIDEO<br>
                <span class="ayuda">Ingrese un id de marca MULTIMEDIA_VIDEO para la cual se generaran formatos de video alternativos. Por ejemplo: 2</span>
                <br />
                <br />
                MULTIMEDIA_VIDEO
                <input style="width: 50px;" type="text" id="nueva_marca_xcoding" class="fieldform xc_numero" value="" />
                <div style="float: right; margin-top: 4px; margin-right: 15px;">
                    <img class="selmultiple" src="/%%_prontus_id%%/cpan/core/imag/boto/mas_of.png" title="Agregar nueva marca Prontus" alt="Agregar nueva marca Prontus" width="18" height="18" onclick="CfgXcoding.agregarMarca(); return false;" />
                </div>
            </td>
            <td style="width: 300px;" valign="top">
                Agregar Formato de Video<br>
                <span class="ayuda">Ingrese un identificador para un nuevo formato.<br />Por ejemplo: A</span>
                <br />
                <br />
                <input style="width: 250px;" type="text" id="nuevo_formato_xcoding" class="fieldform xc_letra" value="" />
                <div style="float: right; margin-top: 4px; margin-right: 15px;">
                    <img class="selmultiple" src="/%%_prontus_id%%/cpan/core/imag/boto/mas_of.png" title="Agregar nuevo formato" alt="Agregar nuevo formato" width="18" height="18" onclick="CfgXcoding.agregarFormato(); return false;" />
                </div>
            </td>
        </tr>
        <tr>
            <td valign="top" colspan="2">
                <div style="clear: both; height: 5px;"></div>
                <table class="tableform table-list-striped">
                    <tr class="head">
                        <td>Par&aacute;metro</td>
                        <td>Valor</td>
                        <td>Par&aacute;metro</td>
                        <td>Valor</td>
                    </tr>
                    <tr>
                        <td valign="top">VIDEOSIZE<br>
                                <span class="ayuda">Alto y ancho m&aacute;ximo permitido para este formato, al recodificar se usar&aacute; este valor como m&aacute;ximo (pixeles).</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="VIDEOSIZE" class="xcoding_param">
                                <option value="">Original</option>
                                <option value="160">160</option>
                                <option value="256">256</option>
                                <option value="320">320</option>
                                <option value="360">360</option>
                                <option value="384">384</option>
                                <option value="426">426</option>
                                <option value="480">480</option>
                                <option value="640">640</option>
                                <option value="854">854</option>
                                <option value="960">960</option>
                                <option value="1280">1280</option>
                                <option value="1366">1366</option>
                                <option value="1600">1600</option>
                                <option value="1920">1920</option>
                            </select>
                        </td>
                        <td valign="top">VIDEOBITRATE<br>
                                <span class="ayuda">Bitrate a utilizar al codificar el video.</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="VIDEOBITRATE" class="xcoding_param">
                                <option value="">Original</option>
                                <option value="200">200 kbps</option>
                                <option value="250">250 kbps</option>
                                <option value="300">300 kbps</option>
                                <option value="400">400 kbps</option>
                                <option value="500">500 kbps</option>
                                <option value="600">600 kbps</option>
                                <option value="700">700 kbps</option>
                                <option value="800">800 kbps</option>
                                <option value="900">900 kbps</option>
                                <option value="1000">1000 kbps</option>
                                <option value="1100">1100 kbps</option>
                                <option value="1200">1200 kbps</option>
                                <option value="1500">1500 kbps</option>
                                <option value="1800">1800 kbps</option>
                                <option value="2000">2000 kbps</option>
                                <option value="2500">2500 kbps</option>
                                <option value="3000">3000 kbps</option>
                                <option value="3500">3500 kbps</option>
                                <option value="4000">4000 kbps</option>
                                <option value="4500">4500 kbps</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top">H264PROFILE<br>
                                <span class="ayuda">Perfil de h.264 a utilizar.</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="H264PROFILE" class="xcoding_param">
                                <option value="">Por defecto</option>
                                <option value="baseline">baseline</option>
                                <option value="main">main</option>
                            </select>
                        </td>
                        <td valign="top">AUDIOBITRATE<br>
                                <span class="ayuda">Bitrate a utilizar al codificar el audio.</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="AUDIOBITRATE" class="xcoding_param">
                                <option value="">Original</option>
                                <option value="32">32 kbps</option>
                                <option value="48">48 kbps</option>
                                <option value="56">56 kbps</option>
                                <option value="64">64 kbps</option>
                                <option value="96">96 kbps</option>
                                <option value="128">128 kbps</option>
                                <option value="160">160 kbps</option>
                                <option value="192">192 kbps</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top">AUDIOSAMPLING<br>
                                <span class="ayuda">Frecuencia de muestreo del audio.</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="AUDIOSAMPLING" class="xcoding_param">
                                <option value="">Original</option>
                                <option value="22050">22.500 Hz</option>
                                <option value="32000">32.000 Hz</option>
                                <option value="44100">44.100 Hz</option>
                                <option value="48000">48.000 Hz</option>
                            </select>
                        </td>
                        <td valign="top">AUDIOCHANNELS<br>
                                <span class="ayuda">Nro de canales de audio que tendr&aacute; el audio recodificado.</span></td>
                        <td valign="top">
                            <select style="width: 120px;" id="AUDIOCHANNELS" class="xcoding_param">
                                <option value="">Original</option>
                                <option value="1">1 (Mono)</option>
                                <option value="2">2 (Est&eacute;reo)</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 250px;" colspan="2" valign="top">Par&aacute;metros X264<br>
                                <span class="ayuda">Par&aacute;metros especificos para la libreria x264, <br />Por ejemplo:<br />b_adapt=2:trellis=1:cabac=1:bframes=3:keyint=90
                                <br/><br/></span>
                                <div class="msg-global" style="display: block;">
                                    <img src="/%%_PRONTUS_ID%%/cpan/core/imag/boto/msg-alert.png" width="24" height="24" alt="Alerta" title="Alerta" />
                                    <span>Si se ingresan par&aacute;metros incorrectos la transcodificaci&oacute;n no funcionar&aacute;.</span>
                                </div>
                        </td>
                        <td valign="top" colspan="2">
                            <textarea id="X264" cols="80" rows="7" class="fieldform xcoding_param"></textarea>
                        </td>
                    </tr>
                </table>
                <div class="botones">
                    <div class="boton-gris3 aright">
                        <a onclick="CfgXcoding.cargaCfg(); return false;" href="#" class="button" title="Cancelar">
                            <span>Cancelar</span>
                        </a>
                    </div>
                    <div class="boton-gris3 aright">
                        <a onclick="CfgXcoding.guardar(); return false;" href="#" class="button" title="Guardar">
                            <span>Guardar Formatos</span>
                        </a>
                    </div>
                </div>
                <div class="aright" id="xcoding-loading" style="margin-right: 55px; display: none;">
                    <img src="/%%_prontus_id%%/cpan/core/imag/loading.gif" width="32" height="32" alt="loading" />
                </div>
            </td>
        </tr>
    </table>
</div> <!--/listado-->
<script>
$(document).ready(function() {
    if ($('input[name=GEN_HLS]:checked').val() == 'SI') {
        $('#GEN_HLS_alert').show();
    }
    if ($('input[name=MODO_PARALELO]:checked').val() == 'SI') {
        $('#MODO_PARALELO_alert').show();
    }
    CfgXcoding.init();
});
</script>
