<?php
// Genera la estructura de datos que se usara para generar el menu jerarquico.
$taxnoms = array();
$taxlnks = array();
$i = 0;
$maxi = 0;
$maxj = 0;
$maxk = 0;

$i++;$j=0;$k=0;
if ($maxi < $i) { $maxi = $i; };
$taxnoms[$i][0][0] = '%%nom%%';
$taxlnks[$i][0][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$i++;$j=0;$k=0;
if ($maxi < $i) { $maxi = $i; };
$taxnoms[$i][0][0] = '%%nom%%';
$taxlnks[$i][0][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$i++;$j=0;$k=0;
if ($maxi < $i) { $maxi = $i; };
$taxnoms[$i][0][0] = '%%nom%%';
$taxlnks[$i][0][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$j++;$k=0;
if ($maxj < $j) { $maxj = $j; };
$taxnoms[$i][$j][0] = '%%nom%%';
$taxlnks[$i][$j][0] = '%%lnk%%';

$i++;$j=0;$k=0;
if ($maxi < $i) { $maxi = $i; };
$taxnoms[$i][0][0] = '%%nom%%';
$taxlnks[$i][0][0] = '%%lnk%%';

$i++;$j=0;$k=0;
if ($maxi < $i) { $maxi = $i; };
$taxnoms[$i][0][0] = '%%nom%%';
$taxlnks[$i][0][0] = '%%lnk%%';




// Escribe estructura de menu jerarquico.
for($i=1;$i<=$maxi;$i++) {
  $nombre = $taxnoms[$i][0][0];
  $link = $taxlnks[$i][0][0];
  // Detecta si el nivel existe o no.
  if ($nombre != '') {
    echo '<div class="show">' . "\n";
    // Detecta si el menu tiene hijos o no.
    if (count($taxnoms[$i])>=2 && count($taxnoms[$i][1])>=1 && $taxnoms[$i][1][0] != '') {
      // Menu de nivel 1 tiene hijos. Se agrega accion de mostrar/ocultar submenu.
      echo '<div class="titular"><div><a id="ida_'.$i.'" class="" href="'.$link.'" onclick="showHide(\'idmenu_' . $i . '\')">' .$nombre. '</a></div></div>' . "\n";
      // Div que contiene el submenu.
      echo '<div id="idmenu_'.$i.'" class="hide">' . "\n";
      for($j=1;$j<=$maxj;$j++) {
        if(count($taxnoms[$i])>=($j+1) && count($taxnoms[$i][$j])>=1) {
          $nombre = $taxnoms[$i][$j][0];
          $link = $taxlnks[$i][$j][0];
          // Detecta si el nivel existe o no.
          if ($nombre != '') {
            // Detecta si el menu tiene hijos o no.
            if (count($taxnoms[$i][$j])>1 && $taxnoms[$i][$j][1] != '') {
              echo '<div class="titular2"><div><a id="ida_'.$i.'_'.$j.'" class="" href="'.$link.'" onclick="showHide(\'idmenu_' .$i.'_'.$j. '\')">' .$nombre. '</a></div></div>' . "\n";
              // Div que contiene el submenu.
              echo '<div id="idmenu_'.$i.'_'.$j.'" class="hide">' . "\n";
              for($k=1;$k<=$maxk;$k++) {
                $nombre = $taxnoms[$i][$j][$k];
                $link = $taxlnks[$i][$j][$k];
                // Detecta si el nivel existe o no.
                if ($nombre != '') {
                  echo '<div class="titular3"><a id="idmenu_'.$i.'_'.$j.'_'.$k.'" href="' . $link . '">'.$nombre.'</a></div>' . "\n";
                };
              };
              echo '</div>'; # Cierra menu de nivel 3.
            }else{
              // Menu de nivel 2 no tiene hijos.
              echo '<div class="titular2"><div><a id="ida_'.$i.'_'.$j.'" class="" href="' . $link . '" >'.$nombre.'</a></div></div>' . "\n";
            };
          };
        };
      };
      echo '</div>' . "\n"; // Cierra menu de nivel 2.
    }else{
      // Menu de nivel 1 no tiene hijos.
      echo '<div class="titular"><div><a  id="ida_'.$i.'" class="" href="' . $link . '" onClick="Set_Cookie(\'openedMenu\',\'\')">'.$nombre.'</a></div></div>' . "\n";
    };
    echo '</div>' . "\n"; // Cierra menu item de nivel 1.
  };
};
?>
<script type="text/javascript" src="/modelo_minimo/js-local/menu.js"></script>
